<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/trivia.css') }}">
    <style type="text/tailwindcss">
      @theme {
        --font-title: "roboto", sans-serif;
        --font-mono: "in", inconsolata;
        --color-pastel-blue: #d4f5ff;
        --color-pizza: #0000FF;
      }
    </style>

    <title>Squash's Trivia Page</title>
  </head>

  <body class="bg-linear-to-r from-green-300 to-violet-300">
    <nav>
      <a href="{{ url_for('home') }}">Home</a>
      <a href="{{ url_for('jokes') }}">Jokes</a>
      <a href="{{ url_for('trivia') }}">Trivia</a>
      <a href="{{ url_for('activities') }}">Activities</a>
      <a href="{{ url_for('logout') }}">Logout</a>
    </nav>

    <h2>trivia</h2>
    <p>logged in as {{ username }}</p>
    <hr>
    <!-- Jinja conditional: if stage == "choose", show the difficulty buttons -->
    {% if stage == "choose" %}
      <h3>Choose Difficulty</h3>
      <!-- Submits the chosen difficulty to /trivia via POST -->
      <form action="{{ url_for('trivia') }}" method="post">
        <button type="submit" name="difficulty" value="easy">Easy</button>
        <button type="submit" name="difficulty" value="medium">Medium</button>
        <button type="submit" name="difficulty" value="hard">Hard</button>
      </form>

    {% else %}
     <!-- (stage == "question"), shows the question UI -->
      <h3>Trivia Question:</h3>
      <p id="question"></p>

      <p>Difficulty: <span id="difficulty"></span></p>
      <p>Category: <span id="category"></span></p>

      <div id="message"></div>
      <!-- Shows total points from Flask (data.get_score(user)) -->
      <p>Total Points: <span id="totalPoints">{{ points }}</span></p>

      <p>Answer Choices:</p>

      <form action="{{ url_for('trivia') }}" method="post" id="answerForm">
        <input type="hidden" name="current_difficulty" value="{{ chosen_difficulty }}">
        <input type="hidden" name="answer" id="selectedAnswer" value="">
        <div id="answers"></div>
        <button id="nextBtn" name="nextbtn" type="submit" disabled>Next</button>
      </form>
      
    <script>
    window.TRIVIA_DATA = {{ trivia | tojson }};
    </script>
    <script src="{{ url_for('static', filename='js/trivia.js') }}"></script>
    {% endif %}
  </body>
</html>
